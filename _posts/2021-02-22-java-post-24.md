---
title: "자바 (24). Mybatis에서 ENUM 사용하기" 
date: 2021-02-22 22:45
categories: Java
---

mybatis에서 enum 타입을 리턴 받으려 하다보면 에러를 만나게 된다. 이에 대해서 알아보자 :)

나는 개인적으론 enum을 잘 사용 안하는 편이다. 아니 잘 사용 못하는게 더 옳은 표현이려나?...

원래 익숙한게 제일 좋은 코드? 이므로 잘 안쓰게 되는거 같다

그러다 이번 회사 프로젝트들을 merge 하는 단계에서 좀 코드를 깔금하게 하고 싶은 욕심에 enum을 사용하였다.

물론 사용은 그냥 하면 된다. 하지만 enum mybatis에서 return 받기 위해선 약간의 수고? 가 필요하다.

이제 그 방법을 알아보도록 하자.

### 0. 차례

1. enum type 다시 보기
2. TypeHandler 란 무엇인가?
3. Mybatis에서 enum사용하기

### 1. enum type 다시 보기

__1-1 enum 기초 개념__
__1-2 enum 의 실무 이용__
으로 나누어 설명을 하도록 한다.

#### 1-1. enum(열거형) 기초 개념
enum은 사전적으로 열거형(enumerated type) 이라고 부른다. 열거형은 서로 연관된 상수들의 집합이라고도 할 수 있다. 

enum는 JAVA 1.5 버전 부터 등장하였다. 이전에는 상수값 관리르 정수 열거 패턴을 이용하여 관리 하였다. 

정수 열거 패턴은 static final로 불변의 상수 값을 만들어 사용하는 것이다. 네이밍 규칙은 대문자로 하고, 변수명을 의미있고 다른 상수들과 구분을 지어 명명한다

Enum은 이미 선언 되었던 Enum 상수 외의 객체는 사용할 수 없으며, toString 메서드를 호출하면 인쇄 가능 문자열로 쉽게 변환 할 수 있다. 


__1.5버전 이전의 열거방식인 int enum pattern__ 
```java
public class Company {
    private static final int APPLE = 1;
    private static final int GOOGLE = 2;
    private static final int TESLA = 3;
}
```
정수 열거 패턴의 단점은 타입 안전을 보장할 방법이 없으며 표현력도 그다지 좋지가 않다. 

자바가 정수 열거 패턴을 위한 별도 이름 공간 namespace을 지원하지 않기 때문에 언더바(_)를 통하여 접두어로 이름 충돌을 방지 한다. 

가장 큰 단점 중 하나는 정수 열거 패턴을 사용한 상수값(constant)는 컴파일을 하면 그 값이 클라이언트 파일에 그대로 새겨지므로, 상수 값을 변경하면 다시 컴파일을 해야 하는 번거로움도 있었다고 한다.

이러한 열거 패턴의 단점을 극복하고자 Enum Type이 생겼다.

Enum Type은 class keyword자리에 enum만 적어주면 된다. 

위의 예를 enum type으로 변경하면 아래와 같다

```java
enum Company {
    APPLE(1);
    GOOGLE(2);
    TESLA(3);
    
    private final int companys;
    
    Company(int companys) {
        this.companys = companys;
    }
}
```
위의 열거타입을 보면 int자료형의 값이 저장되어 있는데, 이 의미는 생성자를 호출하여 특정 데이터 값을 Enum 필드에 저장한다는 의미이다.

enum 객체를 생성하면서 값을 넣어 생성자를 초기화 하는 것은 불가능하다.

enum의 생성자는, 기본적으로 Java에서 private로 인식 하기 때문에 이러한 접근이 불가능하다. 

그러면 왜 private으로 인식할까? 그 이유는 Enum은 서로 __연관된 고정 상수의 집합__ 이기 때문이다. 즉 외부에서 객체를 생성하지 못하게 막고 따라서 생성자를 통해 값을 초기화 하거나 변경하는것을 막기 위함이다.




코드를 보며 익혀보도록 하자 

