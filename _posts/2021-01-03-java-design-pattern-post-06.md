---
title: "자바 디자인 패턴 (6). 옵저버 패턴 (Observer Pattern)"
date: 2021-01-03 11:09
categories: JavaDesignPattern
---

2021년 2번째 포스팅, 객체 상태 변화를 관찰하는 자바 옵저버 패턴에 대해 알아보자, (변태 스토커)

### 1. 옵저버 패턴이란? 

![옵저버 패턴](https://upload.wikimedia.org/wikipedia/commons/thumb/8/8d/Observer.svg/854px-Observer.svg.png)

우리는 객체지향 프로그래밍 할때, 객체들 사이의 다양한 처리를 하는 경우가 있다. 그 중 한예로는 특정 객체의 상태가 바뀔 경우 다른 객체들에게 이 변경 상태를 알려줘야할 경우는 매우 빈번하다. 상태를 가지고 있는 주체 객체와 상태의 변경을 알아야 하는 __관찰 객체(Observer object)__ 가 존재하며 이들의 관계는 1:N 이 된다. 
이런 서로의 정보 교환의 관계에서 정보 단위가 크거나 객체 규모가 클수록 즉, 관계들이 복잡할 수록 점점 구현하기가 어려워지고 복잡성이 매우 증가하게 된다.
이러한 기능을 쉽게 구현할 수 있도록 제시한것이 바로 __옵저버 패턴__ 이다.

다른 이름으론 종속자(Dependent), 게시-구독(Publish-subsribe) 등

### 2. 옵저버 패턴의 사례
1. 외부에서 발생한 이벤트 (ex 사용자 입력) 에 대한 응답. (이벤트 기반 프로그래밍)
2. 객체의 속성 값 변화에 따른 응답, 종종 콜백은 속성 값 변화를 처리하기 위해 호출될 뿐 아니라 속성 값 또한 바꾼다.
   (잘못쓰면 이벤트 연쇄의 원인이 된다.)
3. 실생활에서 옵저버 패턴은 뭐가 있을까? 
   (신문 구독?)

### 3. 옵저버 패턴의 장점
옵저버 패턴을 사용하면 주체 및 옵저버 모두를 독립적으로 변형하기 쉽다. 감시자를 재사용하지도 않고 주체를 재사용할 수 있고, 주체 없이도 감시자를 재사용할 수 있다. 
또한 주체나 감시자의 수정 없이도 감시자를 추가할 수 있다.

아래는 옵저버 패턴의 장점이다.

1. Subject와 Observer __클래스 간에는 추상적 결합도만 존재__ 하게 된다.
2. __브로드캐스트 방식__ 의 교류가 가능
   (일반적 요청과는 달리, 옵저버 패턴에서 주체가 보내는 통보는 구체적인 수신자를 지정할 필요가 없다.)
3. 예측하지 못한 정보를 갱신

### 4. 자바 내장 옵저버 패턴 
- java.util.Observer
- java.util.Observable

자바 내장 옵저버 패턴은 푸시 방식, 풀방식 모두 사용가능하다.

##### 4-2. 자바 내장 옵저버 패턴 사용 방법

1. 옵저버 목록 추가 삭제 
   1. java.utill.Observer 인터페이스를 구현
   2. java.utill.Observavle 객체의 addObserver()메서드를 호출하면 옵저버 목록에 추가
   3. java.utill.Observavle 객체의 deleteObserver()메서드를 호출하면 옵저버 목록에 삭제

2. 연락 방법
   1. java.utill.Observable 상속을 받는 주제 클래스에 setChanged() 메소드를 호출해 객체의 상태가 바뀐 것을 알린다.
   2. notifyObservers() 또는 notifyObserver(Object arg) 메소드를 호출하여 사용한다.
   

3. 연락을 받는 방법
   1. update(Observer o, Object arg) 메소드를 구현
   - Observer o : 연락을 보내는 주제 객체 인자 
   - Object arg : notifyObservers(Object arg) 메서드에서 인자로 전달된 데이터 객체


##### 4-3 자바 내장 옵저버 패턴 예제 코드
