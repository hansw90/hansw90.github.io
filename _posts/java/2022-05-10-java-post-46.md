---
title: "Java TDD(1) 테스트 코드 적용하기 (JUnit, TDD) 스프링 부트"
date: 2022-05-10-00:00:00 -0000
categories: JAVA

---

TDD에 대한 간단한 정리를 하려한다.
이 포스트에선 실습보단 개념 위주로 적어보려한다.

## 0. 목차
1. TDD란?
2. 테스트 코드 작성 목적
3. JUnit이란?
4. JUnit 모듈 설명 
5. JUnit LifeCycle Annotation
6. JUnit Main Annotation

## 1. TDD란?
TDD는 테스트 주도 개발이라는 의미를 가진다.
단순하게 표현하자면 테스트를 먼저 설계 및 구축 후 테스트를 통과할 수 있는 코드를 짜는 방향
코드 작성 후 테스트를 진행하는 지금까지 사용된 일반적인 방식과는 차이가 있다.

__애자일 개발 방식__
- 코드 설계시 원하는 단계적 목표에 대해 설정하여 진행하고자 하는 것에 대한 결정 방향의 갭을 줄이고자 함
- 최초 목표에 맞춘 테스트를 구축하여 그에 맞게 코드를 설계하기 떄문에 보다 적은 의견 충돌을 기대할 수 있다. (방향 일치로 인한 피드백과 진행 방향의 충돌 방지)

## 2. 테스트 코드 작성 목적
코드의 안정성을 높일 수 있다.
기능을 추가하거나 변경하는 과정에서 발생할 수 있는 Side-Effect를 줄인다.
해당 코드가 작성된 목적을 명확하게 표현할 수 있다.
- 코드에 불필요한 내용이 들어가는 것을 줄인다.

## 3. JUnit이란?
Java 진영의 대표적인 Test Framework

- 단위 테스트 (Unit Test)를 위한 도구를 제공한다.
```
단위 테스트
- 코드의 특정 모듈이 의도된 대로 동작하는지에 대한 테스트를 하는 절차를 의미한다.
- 모든 함수와 메소드에 대한 각각의 테스트 케이스를 작성한다.
```
- 어노테이션을 기반으로 테스트를 지원한다.
- Assert(단정문) 으로 테스트 케이스의 기대값에 대해 수행 결과를 확인할 수 있다.
- Spring Boot 2.2 버전부터 JUnit5 버전을 사용한다.
- JUnit5 는 크게 Jupiter, Platform, Vintage 모듈로 구성된다.

## 4. JUnit 모듈

#### 4-1. JUnit Jupiter
TestEngine API 구현체로 JUnit 5를 구현하고 있다.
테스트의 실제 구현체는 별도 모듈 역할을 수행하는데, 그 모듈 중 하나가 Jupiter-Engine이다.
이 모듈은 Jupiter-AP를 사용하여 작성한 테스트 코드를 발견하고 실행하는 역할을 수행한다. 
개발자가 테스트 코드를 작성할때 사용된다.

#### 4-2. JUnit Platform
Test를 실행하기 위한 뼈대
Test를 발견하고 테스트 계획을 생성하는 TestEngine __인터페이스__를 가지고 있다.
TestEngine을 통해 Test를 발견하고, 수행 및 결과를 보고한다.
그리고 각종 IDE 연동을 보조하는 역할을 수행한다. (콘솔 출력)


## 5. JUnit LifeCycle Annotation
- @Test: 테스트용 메소드를 표현하는 어노테이션
- @BeforeEach: 각 테스트 메소드가 시작 되기 전에 실행되어야 하는 메소드 표현
- @AfterEach: 각 테스트 메소드가 시작된 후 실행되어야 하는 메소드를 표현
- @BeforeAll: 테스트 시작 전에 실행되어야 하는 메소드 표현(static 처리 필요)
- @AfterAll: 테스트 종료후에 실행되어야 하는 메소드 표현(static 처리 필요)

## 6. JUnit Main Annotation

#### @SpringBootTest
- 통합 테스트 용도로 사용된다.
- @SpringbootApplication을 찾아가 하위의 모든 Bean을 스캔하여 로드한다.
- 그후 Test용 Application Context를 만들어 Bean을 추가하고, MockBean을 찾아 교체한다.


#### @ExtendWith
- JUnit4 에서 @RunWith로 사용되던 어노테이션이 ExtendWith로 변경되었다.
- @ExtendWith는 메인으로 실행될 Class를 지정한다.
- @SpringBootTest는 기본적으로 @ExtendWith가 추가되어 있다.