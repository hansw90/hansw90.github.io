---
title: "자바 (28). HTTP? RestAPI? 완전 정복" 
date: 2021-06-05 00:00
categories: Java
---

2달만에 올리는, 6월 첫 포스팅
HTTP 아직도 어렵더라,,,

### 0. 차례
0. 차례
1. 들어가기전에
2. Http 전송 정보
   - HTTP Request 정보
   - HTTP Response 정보
   - JAVA HttpServletRequest 예시
   - 컨텍스트경로 VS 서블릿경로
3. HTTP 응답코드
4. HTTP 메소드 정리
   - 메소드 정리
   - POST VS PUT
   - PUT VS PATCH
5. JAVA HttpURLConnection 
   - 예제코드
   - setRequestProperty 정리
6. JAVA HttpClient
   - 예제코드
7. Spring (Response/Request) Body 


### 1. 들어가기전에
회사서, 오랜만에 Rest API를 수정 해야될 일이 있었다, Django로 만들어진 다른 REST API에 요청을 보내야 하는 상황. 
그런데 Postman에선 정상적으로 body에 json 으로 받아오는것이,,
코드단에선 text/html형태로 받아오는 문제가 있었다, 그전에는 없던 문제라 조금 당황...
HttpURLConnection 에서 __setRequestProperty__ 를 통해 해결이 가능한 문제였다. 
이전에 봤었던것 같은데,, 까먹은것 같아 처음부터 끝까지 다시한번 정리해보려한다.


### 2. Http 전송 정보 


1. ##### HTTP Request 정보
   GET /index.html HTTP/1.1 / __요청 URL정보 (Mehotd /URI HTTP버젼)__
   user-agent: MSIE 6.0; Window NT 5.0 / __사용자 웹 브라우져 종류__
   __accept__: test/html; */* / __요청 데이터 타입 (응답의 Content-type과 유사)__ (중요)
   cookie:name=value / __쿠키(인증 정보)__
   refere: http://abc.com / __경유지 URL__
   host: www.abc.com /__요청 도메인__
   
2. ##### HTTP Response 정보 
   HTTP/1.1 200 OK / __프로토콜 버젼 및 응답코드__
   Server: Apache / __웹 서버 정보__
   Content-type: text/html / __MIME 타입__ (중요)
   Content-length : 1593 / __HTTP BODY 사이즈__
   <html><head>..... / __HTTP BODY 컨텐츠__

3. ##### JAVA HttpServletRequest 예시
```java
   @Controller
   public class ExampleController {
     @RequestMapping("/example")
     public ResponseEntity<?> getExample(HttpServletRequest httpServletRequest) {
        // 쿼리를 제외한 프로토콜+도메인+포트번호+컨텍스트 경로+서블릿 경로
        // 결과 : http://127.0.0.1:8080/contextpath/servlcetpath/in
        httpServletRequest.getRequestURL();
        // 요청 URL 중 포트번호와 쿼리 사이의 부분을 얻어온다. 컨텍스트경로 + 서블릿 경로
        // URL과 URI를 비슷하게 사용들 하지만 다르다.
        // 결과 : contextpath/servlcetpath/index.jsp
        httpServletRequest.getRequestURI();
        // 컨텍스트 경로를 가지고 온다.
        // 결과 :  /contextpath
        httpServletRequest.getContextPath();
        // 서블릿경로를 얻어 온다.
        // 결과 : /servlcetpath/index.jsp
        httpServletRequest.getServletPath();
        // 쿼리를 얻어온다.
        // 결과 : seq=1&type=NOTICE
        httpServletRequest.getQueryString();
        // 도메인을 얻어온다.
        // 127.0.0.1
        httpServletRequest.getDomainName();
        // 포트(port)를 얻어옵니다.
        // 결과 : 8080
        httpServletRequest.getServerPort();
        
        return null;
     }
   }
```
4. ##### 컨텍스트경로 VS 서블릿경로
https://www.programmersought.com/article/20345578363/ (참조)

### 3. HTTP 응답코드
- 100번대 (정보전송 임시응답)
    - 100 : Continue(클라이언트로 부터 일부 요청을 받았으며 나머지 정보를 계속 요청)
    - 101 : Switching protocols
- 200번대 (성공)
    - 200 : OK(요청이 성공적으로 수행)
    - 201 : Created (PUT 메소드에 의해 원격지 서버에 파일이 생성됨)
    - 202 : Accepted(웹 서버가 명령을 수신)
    - 203 : Non-authoritative information (서버가 클라이언트 요구 중 일부만 전송)
    - 204 :  No content, (PUT, POST, DELETE 요청의 경우 성공은 했지만 전송할 데이터가 없는 경우)
- 300번대 (리다이렉션)
    - 301 : Moved permanently (요구한 데이터를 변경된 타 URL에 요청함 / Redirect된 경우)
    - 302 : Not temporarily
    - 304 : Not modified (컴퓨터 로컬의 캐시 정보를 이용함, 대개 gif 등은 웹 서버에 요청하지 않음

### 4. HTTP 메소드 정리
### 5. JAVA HttpURLConnection 
### 6. JAVA HttpClient
### 7. Spring (Response/Request) Body 