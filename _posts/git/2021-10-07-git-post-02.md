---
title: "Git 다 써보기, (2) Git 기초"
date: 2021-10-07-00:00:00 -0000
categories: GIT
---

우리가 git init을 한다는게 어떤것인지 부터 file 을 추적하고 추적을 그만두는 방법까지 기초적인 문법을 이해하고 사용해 본다.


### 0. Git 저장소 만들기

Git 저장소를 쓰는 방법
1. 아직 버전관리를 하지 않은 로컬 디렉토리를 선택해서 Git 저장소를 생성
2. 다른 어딘가에서 Git 저장소를 Clone 하는 방법

##### 기존 디렉토리를 Git 저장소로 만들기
버전 관리를 하지 않은 기존 프로젝트를 Git으로 관리하고 싶은 경우
일단 프로젝트의 디렉토리로 이동한다.

```text
cd /C:\Users\ashgh\workspace\git_test
```

그리고 아래 명령어를 실행한다.
```text
$ git init
```

이 명령어는 .git 이라는 __하위 디렉토리__를 만드는 명령어이다. .git 디렉토리에는 저장소에 필요한 뼈대 파일들이 들어있다.

이 명령만으로는 아직 프로젝트의 어떤 파일도 관리가 되지 않는다. 

Git이 파일을 관리 하게 하기 위해선 저장소에 파일을 추가하고 __커밋__을 해야한다. 

git add 명령으로 파일을 추가하고 __git commit__ 명령으로 커밋한다.

```text
$ git add *.txt
$ git add LICENSE
$ git commit -m 'initial project version'
```

##### 기존 저장소 Clone 해오기
다른 프로젝트를 참여(Contribute) 하거나 Git 저장소를 복사하고 싶을떈 __git clone__ 을 한다.

__git clone__ 을 사용하면 프로젝트 히스토리를 모두 받아온다. 실제로 서버의 디스크가 망가져도 클라이언트 저장소 중에서 아무거나 하나 가져다 복구를 진행하면 된다.
(서버에만 적용한 설정은 복구가 불가하지만 데이터는 복구 하면 된다.)

git 을 clone 하는 방법은 ssh/https 방법 이 있다. 그건 편한데로
```text
Git은 다양한 프로토콜을 지원한다. https:// 외 git:// 를 사용할수도 있고. 
user@server:path/to/repo.git 처럼 SSH 프로토콜을 사용할수도 있다.
```

### 1. 수정하고 저장소에 저장하기

Git 저장소를 만들고 working directory 에 Checkout을 해 보았다. 
이제는 파일을 수정하고 파일의 스냅샷을 커밋해 보자
파일을 수정하다 저장하고 싶다면 스냅샷을 커밋하면 된다.

```text
워킹 디렉토리 :
체크아웃 :
파일 스냅샷 :
```
워킹 디렉토리의 모든 파일은 Tracked(관리대상) 과 Untracked(비관리대상) 으로 나뉜다.
Tracked 파일은 이미 스냅샷에 포함되어 있는 파일이다. Tracked 파일은 또 Unmodified (수정하지 않음) 과 Modified (수정함) 그리고 Staged 상태중 하나이다.
즉 Git이 알고있는 파일이라는 것이다.

이외의 모든 파일은 모두 Untracked 파일이다. Untracked 파일은 워킹 디렉토리에 있는 파일 중 스냅샷에도 __Staging Area__ 에도 포함되지 않은 파일이다. 
처음 저장소를 Clone 한다면 모든 파일은 Tracked 이면서 Unmodified 상태이다. 파일을 Checkout 하고 아무런 수정이 없기 때문

그러면 저장소에서 어떠한 파일을 수정하면 Git은 그 파일을 Modified 상태로 인식하게 된다. 
실제로 커밋을 위해선 수정 파일을 Staged 상태로 만들고, Staged 상태 파일을 커밋해야한다. 
이러한 라이프 사이클을 계속 반복한다.

![git lifecycle](https://git-scm.com/book/en/v2/images/lifecycle.png)

```text
Staging Area : 
```

##### 파일의 상태 확인하기
파일의 상태를 확인하려면 보통 git status 명령을 사용하여 확인한다. 

이전 위에서 commit을 한 생태에서 git status 를 하였을땐 아래와 같은 결과가 나온다.
```text
C:\Users\ashgh\workspace\git-test>git status
On branch master
nothing to commit, working tree clean
```

Tracked 파일이 하나도 수정되지 않았다는 의미이다. 또한 현재는 Untracked 파일이 하나도 존재하지 않아 목록에서 보이지가 않는다.

Untracked 파일을 하나 만들어 보도록 하자.

README 파일을 하나 만들어 볼 생각이다.

난 윈도우서 포스팅 중이라,, notepad 명령어를 사용하였고, vi nano등 편한 편집기를 사용하면 될것 같다.
```text
$ notepad README.md
$ git status

On branch master
Untracked files:
  (use "git add <file>..." to include in what will be committed)
        README.md

nothing added to commit but untracked files present (use "git add" to track)
```
Untracked file 이 들어있는것을 볼 수 있다.

Git은 Untracked 파일을 아직 스냅샷(커밋)에 넣지 않은 파일이라고 보고, Tracked 상태가 되기 전까지는 Git 은 절대 그 파일을 커밋하지 않는다.
그래서 일하면서 생성하는 바이너리 파일 같은 것을 커밋하는 실수를 하지 않게 된다.

##### 파일의 추적

위에서 __git add__ 명령어를 통해 파일을 Tracked 추적 상태로 전환할수 있다고 하였다. 명령어를 실행해 보자.
```text
$ git add .
$ git status
On branch master
Changes to be committed:
  (use "git restore --staged <file>..." to unstage)
        new file:   README.md
```

Changes to be committed'' 에 들어 있는 파일은 Staged 상태라는 것을 의미한다.
